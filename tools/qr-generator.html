<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>QR Code Generator - GetIntoCS Tools</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="../css/style.css" rel="stylesheet">  <!-- Adjust path if needed -->
    <!-- QR Code JS Library (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.4/build/qrcode.min.js"></script>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark sticky-top">
        <div class="container">
            <a class="navbar-brand" href="../index.html">GetIntoCS</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link" href="../index.html">Home</a></li>
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">Notes</a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="../notes-dsa.html">Data Structures & Algorithms</a></li>
                            <li><a class="dropdown-item" href="../notes-os.html">Operating Systems</a></li>
                            <li><a class="dropdown-item" href="../notes-dbms.html">DBMS</a></li>
                            <li><a class="dropdown-item" href="../notes-cn.html">Computer Networks</a></li>
                            <li><a class="dropdown-item" href="../notes-python.html">Python</a></li>
                            <li><a class="dropdown-item" href="../see-notes.html">SEE</a></li>
                            <li><a href="../scratch-projects.html">Scratch Projects</a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="../news.html">News</a></li>
                    <li class="nav-item"><a class="nav-link" href="../tools.html">Tools</a></li>
                    <li class="nav-item"><a class="nav-link" href="../about.html">About</a></li>
                    <li class="nav-item"><a class="nav-link" href="../contact.html">Contact</a></li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container my-5">
        <h1>QR Code Generator</h1>
        <p class="lead">Enter a URL or text below to generate a QR code. Click "Generate" to create it, then "Save as PNG" to download.</p>
        <hr>

        <!-- Input Form -->
        <div class="row justify-content-center">
            <div class="col-md-8">
                <form id="qr-form">
                    <div class="mb-3">
                        <label for="url-input" class="form-label">URL or Text:</label>
                        <input type="text" class="form-control" id="url-input" placeholder="e.g., https://getintocs.com" required>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="generateQR()">Generate QR</button>
                    <button type="button" class="btn btn-success ms-2" id="save-btn" onclick="saveQR()" disabled>Save as PNG</button>
                </form>
                <p id="status" class="mt-3 text-muted">Enter text and generate.</p>
            </div>
        </div>

        <!-- QR Display -->
        <div class="row justify-content-center mt-4">
            <div class="col-md-6 text-center">
                <div id="qr-code" class="border p-3 bg-white" style="display: inline-block;"></div>  <!-- QR canvas container -->
            </div>
        </div>

        <div class="text-center mt-4">
            <a href="../tools.html" class="btn btn-secondary">Back to Tools</a>
        </div>
    </div>

    <footer class="mt-5">
        <div class="container text-center">
            <p>&copy; 2025 GetIntoCS.com | Computer Science Notes & Tech News</p>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- QR Generation Script -->
    <script>
        let qrCodeInstance = null;  // To store QR code for saving

        function generateQR() {
            const url = document.getElementById('url-input').value.trim();
            const status = document.getElementById('status');
            const qrContainer = document.getElementById('qr-code');
            const saveBtn = document.getElementById('save-btn');

            if (!url) {
                status.textContent = 'Please enter a URL or text.';
                status.classList.add('text-danger');
                return;
            }

            // Clear previous QR
            qrContainer.innerHTML = '';

            try {
                // Generate QR code
                qrCodeInstance = new QRCode(qrContainer, {
                    text: url,
                    width: 256,
                    height: 256,
                    colorDark: "#000000",
                    colorLight: "#ffffff",
                    correctLevel: QRCode.CorrectLevel.H  // High error correction
                });

                status.textContent = `QR code generated for "${url.slice(0, 50)}${url.length > 50 ? '...' : ''}"`;
                status.classList.remove('text-danger');
                status.classList.add('text-success');
                saveBtn.disabled = false;
            } catch (error) {
                status.textContent = 'Error generating QR code. Try again.';
                status.classList.add('text-danger');
                saveBtn.disabled = true;
            }
        }

        function saveQR() {
            const qrCanvas = document.querySelector('#qr-code canvas');
            if (!qrCanvas) {
                alert('No QR code to save. Generate one first.');
                return;
            }

            // Convert canvas to data URL (PNG)
            const dataURL = qrCanvas.toDataURL('image/png');

            // Create a download link
            const downloadLink = document.createElement('a');
            downloadLink.href = dataURL;
            downloadLink.download = 'qr-code.png';
            document.body.appendChild(downloadLink);
            downloadLink.click();
            document.body.removeChild(downloadLink);

            document.getElementById('status').textContent = 'QR code saved as PNG!';
        }
    </script>
</body>
</html>